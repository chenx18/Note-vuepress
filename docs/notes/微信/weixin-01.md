### 小程序

<a href="https://blog.csdn.net/qq_41646249/article/details/79845945" target="_blank">超链接名</a>

<a href="https://www.jianshu.com/p/7821aab256a8" target="_blank">超链接名</a>

#### 一、 微信小程序原理

+ 小程序本质是一个单页面应用，所有的页面渲染和事件处理，都在一个页面内进行，但又可以通过微信客户端调用原生的各种接口；
+ 它的架构，是数据驱动的架构模式，UI和数据是分离的， 所有的页面更新 都需要通过对数据的更改来实现；
+ 它从技术讲和现有的前端差不多，采用Javascript、wxml、wxss三种技术进行开发；
+ 功能可分为webView和appService两部分；
+ webView用来展示UI，appService用来处理业务逻辑、数据及接口调用；
+ 两个部分在两个进程中运行，通过系统层JSBridge实现通信，实现UI的渲染、事件的处理；

#### 二、 微信小程序的相关文件类型

1. project.config.json 项目配置文件，用得最多的就是配置是否开启https校验；
2. App.js 设置一些全局的基础数据；
3. App.wxss 公共样式，引入iconfont；
4. pages 放置每一个具体的页面；
5. index.json 配置当前页面的标题和引入组件
6. index.wxml 页面结构
7. index.wxss 页面样式
8. index.js   页面逻辑 请求处理数据等

#### 三、 微信小程序与H5的区别

+ 运行环境的不同：传统的HTML5运行环境是浏览器，包括webView，而微信小程序的运行环境并非完整的浏览器，是微信团队开发基于浏览器内核完全重构的一个内置的解析器，针对小程序专门做了优化，配合自己定义的开发语言标准，提升小程序性能；

+ 开发成本的不同： 只在微信中运行，所以不用再去顾虑浏览器兼容性，不用担心生产环境中出现不可预料的奇妙BUG

+ 获取系统级权限的不同: 系统级权限都可以和微信小程序无缝衔接

+ 在生产环境的运行流畅度: 长久以来，当HTML5应用面对复杂的业务逻辑或者丰富的页面交互时，它的体验总是不尽人意，需要不断的对项目优化来提升用户体验。但是由于微信小程序运行环境独立

+ 小程序运行在 js core内 没有Dom树和window对象，无法使用Windown对象和document对象

#### 生命周期

+ onLoad() 页面加载时触发 只会调用一次 可获取当前页面路径的参数
+ onShow() 页面显示、切入后台是触发，一般用来发送数据请求
+ onReady() 页面初次渲染完成时触发， 只会调用一次，代表页面已经和视图层进行交互
+ onHide() 页面隐藏/切入后台时触发， 如底部tab切换到其他页面或小程序切入后台等
+ onUnload() 页面卸载时触发 如redirect 或 navigateBack 到其他页面时

#### 登录流程

+ wx.login 获取code；
+ code给后台换取openId  
+ 通过openId请求接口是否登录绑定微信
+ 是：直接进入index
+ 否：重新登录，调用登录接口
+ 并获取需要的用户权限，如果用户不授权，不给登录，如需在次点登录则会开启授权页面 引导用户授权 （提前写好引导授权的页面）

#### 微信小程序的优劣势

###### 优势

+ 无需下载，通过搜索和扫一扫就可以打开。
+ 良好的用户体验，打开速度快
+ 开发成本要比App底
+ 安卓可添加到桌面，与原始App差不多

###### 劣势

+ 限制比较多，页面大小不能超过1M， 不能打开超过5个层级的页面
+ 样式单一，小程序的部分组件已经成型的，样式不能修改 如： 幻灯片 导航
+ 推广面在，只能通过分享给朋友 附近的小程序推广
+ 依托于微信 无法开发后台管理系统

#### 小程序的双向绑定和vue

> 小程序直接this.data的属性是不可以同步到视图的

```js
// 小程序直接this.data的属性是不可以同步到视图的，必须调用：
this.setData({
        noBind:true
})
```
